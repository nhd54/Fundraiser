<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="style/css/style.css" />
    <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase-firestore.js"></script>
    <title>Document</title>
  </head>
  <body>
      <div class="popUp">
          <div class="headerPopUp"><img src="image/logo.svg">
          <button class="close">luk vindue</button>
          </div>
          <form id="add-cafe-form">
            <div class="rightForm">
            <div class="navnForm">Fornavn<br><input class="navnW" type="text" name="name" placeholder="" /></div>
            <div class="efternavnForm">Efternavn<br><input class="eNavnW" type="text" name="lastname" placeholder="" /><br></div>
            Email<br>
            <input class="emailW" type="text" name="email" placeholder="" /><br>
            Landsdel<br>
            <select name="country" class="minimallandW">
                <option class="countryS" value="">Vælg Landsdel</option>
              <option class="countryS" value="sjælland">Sjælland</option>
              <option class="countryS" value="jylland">Jylland</option>
              <option class="countryS" value="fyn">Fyn</option>
            </select>
          
          <img src="image/donation1_img.jpg"></div>
            <div class="leftForm"><img src="image/icon_penge_kategori.svg"><br><input class="pengePlacering" type="text" name="amount" placeholder="Indtast beløb i DKK" /><br>
    
              <div id="betalingDropdown">
                Kortholders fulde navn<br>
                <input class="fuldNavn" type="text" name="fuldNavn" placeholder="" />
                Kortnummer<br>
                <input class="fuldNavn" type="number" name="kortNummer" placeholder="" />
                Dato CCV<br>
                <input class="dato" type="number" name="dato" placeholder="" />
                
                <input class="dato" type="text" name="CCV" placeholder="" />
              </div>
    
            <img class="iconDonation" src="image/icon_tekstil_kategori.svg"><select class="minimalTekstil" name="textil">
              <option value="">Vælg Tekstil & Tilbehør</option>
              <option value="tæpper">Tæpper</option>
              <option value="tøj">Tøj</option>
              <option value="hundedækken">Hundedækken</option>
              <option value="hundekurv">Hundekurv</option>
              <option value="tilbehør til hunde">Tilbehør til hunde</option>
            </select><br>
    
            <img class="iconDonation" src="image/icon_foder_donation.svg"><select class="minimalFoder" name="pleje">
              <option value="">Vælg Foder & Pleje</option>
              <option value="hundefoder"> Hundefoder </option>
              <option value="hundegodbidder">Hundegodbidder</option>
              <option value="loppekur">Loppekur</option>
              <option value="ormekur">Ormekur</option>
            </select><br>
          
            </div>
             <div class="footerPopUp">
              <button id="giveDonation">GIV DONATION</button></div>
            </form>

            <div class="done">
              <h2>Et kæmpe tak for din donation</h2>
              <span>Du gør en forskel</span>
              <img src="image/tak_img.jpg" alt="">
              <div class="buttons">
                  <button class="insta"><img src="image/some-02.svg"><div class="positionSome"> Del på<br> Instagram</div></button>
                  <button class="fB"><img src="image/some-03.svg"><div class="positionSome"> Del på<br> Facebook</div></button>
              </div>
              
              
            </div>
        </div>
         
        
        <article>
          <section class="largeColumn" id="wallPaper">
            <img src="image/logo.svg" alt="" />
          </section>
          <section class="largeColumn" id="category">
            <div class="categories smallColumn">
              <img class="penge" src="image/icon_penge_kategori.svg" alt="" />
              <br />
              <span>PENGE</span>
            </div>
            <div class="categories smallColumn">
              <img class="tekstil" src="image/icon_tekstil_kategori.svg" alt="" />
              <br />
              <span>TEKSTIL & TILBEHØR</span>
            </div>
            <div class="categories smallColumn">
              <img class="foder" src="image/icon_foder_donation.svg" alt="" />
              <br />
              <span>FODER & PLEJE</span>
            </div>
          </section>
          <section class="largeColumn" id="donation">
            <div class="bigColumn" id="video">
              <img class="video" src="image/video.jpg" alt="" />
            </div>
    
            <div class="bigColumn" id="donator">
              <button class="donation">GIV DONATION</button> <br />
              <p>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Quasi est
                illo asperiores voluptates maiores, magni neque nesciunt veritatis
                laborum libero saepe provident nostrum atque perspiciatis recusandae
                corporis omnis esse illum.
              </p>
            </div>
          </section>
          <section class="largeColumn" id="donationInfo">
            <div class="information">
              MÅL<img src="image/icon_maal.svg" alt="" /> <p class="goal"></p>
            </div>
    
            <div class="information">
              INDSAMLET<img src="image/icon_penge.svg" alt="" /> <p class="indsamlet"></p>
            </div>
    
            <div class="information">
              SENESTE DONATION<img src="image/icon_mand.svg" alt="" />Anonym 125 DKK
            </div>
    
            <div class="information">
              TID TILBAGE<img src="image/icon_dato.svg" alt="" /> <p id="demo"></p>
            </div>
          </section>
    
          <section class="largeColumn" id="gallery">
            <img class="imgIndex" src="image/img-04.jpg" alt="" />
            <img class="imgIndex" src="image/img-01.jpg" alt="" />
            <img class="imgIndex" src="image/img-02.jpg" alt="" />
            <img class="imgIndex" src="image/img-03.jpg" alt="" />
          </section>
          <footerIndex class="largeColumn">
            <h2>GET IN TOUCH</h2>
            <p class="mail">STØT@HUNDOGHJEMLØS.DK</p>
            <h2>Phone <br>
                +45 41441015</h2>
            <div class="some">
                <a href="#"><img src="image/some-01.svg"></a>
                <a href="#"><img src="image/some-02.svg"></a>
                <a href="#"><img src="image/some-03.svg"></a>
            </div>
        </div>
          </footer>
        </article>
  </body>

  <script src="app.js"></script>

  <script>

    var today = new Date();
var dd = today.getDate();
var mm = today.getMonth()+1; //January is 0!
var yyyy = today.getFullYear();

if(dd<10) {
    dd = '0'+dd
} 

if(mm<10) {
    mm = '0'+mm
} 

today = dd + '-' + mm + '-' + yyyy;
console.log(today); 




    let fundraisertest = [];
    let fundraiser = [];
     let fyn = [];
      let jylland = [];
      let sjaelland = [];
      let sum;
      let fullAmount = [];
      let moneyAmount = 0;
      let donations = [];
    const form = document.querySelector("#add-cafe-form");
    document.querySelector(".donation").addEventListener("click", () => {
      document.querySelector(".popUp").style.display = "block";
    });
    db.collection("donations")
          .get()
          .then(snapshot => {
            snapshot.docs.forEach(doc => {
              donations.push(doc.data());
            });
            count();
            test();
            setInterval(function(){ 


              if(form.amount.value.length > 0) {
                
                document.querySelector("#betalingDropdown").style.display = "block";
              }
              else {
                document.querySelector("#betalingDropdown").style.display = "none";
              }

             }, 100);



             document.querySelector(".close").addEventListener("click", () => {
               document.querySelector(".popUp").style.display = "none";
             })
          });


// med limits (kun 1 visning den nyeste )
 db.collection("donations").limit(1)
          .get()
          .then(snapshot => {
            snapshot.docs.forEach(doc => {
              fundraisertest.push(doc.data());
            });
 
          });





db.collection("fundraise")
          .get()
          .then(snapshot => {
            snapshot.docs.forEach(doc => {
              fundraiser.push(doc.data());
            });
          document.querySelector(".goal").textContent = fundraiser[0].goal + " DKK";
          });


          function count() {
        donations.forEach(amount => {
         if(amount.amount > 0) {
          fullAmount.push(amount.amount);
         }    
        }); 
      }

      function test() {
       fullAmount.forEach(sum => {
         moneyAmount = moneyAmount + parseInt(fullAmount);
       })
       document.querySelector(".indsamlet").textContent = moneyAmount + " DKK";
      }
    // saving data
    form.addEventListener("submit", e => {  e.preventDefault();

      document.querySelector("#giveDonation").addEventListener("click", () => {
       
        
        db.collection("donations").add({
          firstname: form.name.value,
          lastname: form.lastname.value,
          email: form.email.value,
          country: form.country.value,
          amount: form.amount.value,
          attend: form.pleje.value,
          textil: form.textil.value,
          date: today
        });

        

        
        document.querySelector("#add-cafe-form").style.display = "none";
        document.querySelector(".done").style.display = "grid";
      });
    });
   

    function showPayment () {
      
      if (form.amount.value = "11"){
        console.log("test test test");
      }
    } 



    var countDownDate = new Date("Jan 5, 2019 15:37:25").getTime();

// Update the count down every 1 second
var x = setInterval(function() {

  // Get todays date and time
  var now = new Date().getTime();

  // Find the distance between now and the count down date
  var distance = countDownDate - now;

  // Time calculations for days, hours, minutes and seconds
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);

  // Display the result in the element with id="demo"
  document.getElementById("demo").innerHTML = days + "d " + hours + "h "
  + minutes + "m " + seconds + "s ";

  // If the count down is finished, write some text 
  if (distance < 0) {
    clearInterval(x);
    document.getElementById("demo").innerHTML = "EXPIRED";
  }
}, 1000);
  </script>
</html>
