<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="style/css/style.css" />
    <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase-firestore.js"></script>
    <title>Document</title>
  </head>
  <body>
    <div class="popUp">
     
      <form id="add-cafe-form">
          <div class="left">  <input type="text" name="name" placeholder="fornavn" />
            <input type="text" name="lastname" placeholder="efternavn" class="lastname" />   
            <input type="text" name="email" placeholder="din email" class="email" /> <br>
           
            
            <select class="country" name="country">
              <option value="sjælland">Sjælland</option>
              <option value="jylland">Jylland</option>
              <option value="fyn">Fyn</option>
            </select></div>
        
        <div class="right"> 
          <input type="text" name="amount" placeholder="penge beløb" /> <br>
          <select  name="textil">
              <option value="">Vælg textil & tilbehør type</option>
              <option value="tæpper">Tæpper</option>
              <option value="tøj">Tøj</option>
              <option value="hundedækken">Hundedækken</option>
              <option value="hundekurv">Hundekurv</option>
              <option value="tilbehør">Tilbehør</option>
            </select>
            <br>
            <select  name="attend">
                <option value="">Vælg foder & pleje</option>
                <option value="hundefoder">Hundefoder</option>
                <option value="hundegodbidder">Hundegodbidder</option>
                <option value="loppekur">Loppekur</option>
                <option value="ormekur">Ormekur</option>
              </select></div>
              <button id="giveDonation">GIV DONATION</button>
            </form>
          </div>
         
          
    
    </div>
    <article>
      <section class="largeColumn" id="wallPaper">
        <img src="image/logo.svg" alt="" />
      </section>
      <section class="largeColumn" id="category">
        <div class="categories smallColumn">
          <img class="penge" src="image/icon_penge_kategori.svg" alt="" />
          <br />
          <span>PENGE</span>
        </div>
        <div class="categories smallColumn">
          <img class="tekstil" src="image/icon_tekstil_kategori.svg" alt="" />
          <br />
          <span>TEKSTIL & TILBEHØR</span>
        </div>
        <div class="categories smallColumn">
          <img class="foder" src="image/icon_foder_donation.svg" alt="" />
          <br />
          <span>FODER & PLEJE</span>
        </div>
      </section>
      <section class="largeColumn" id="donation">
        <div class="bigColumn" id="video">
          <img class="video" src="image/video.jpg" alt="" />
        </div>

        <div class="bigColumn" id="donator">
          <button class="donation">GIV DONATION</button> <br />
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Quasi est
            illo asperiores voluptates maiores, magni neque nesciunt veritatis
            laborum libero saepe provident nostrum atque perspiciatis recusandae
            corporis omnis esse illum.
          </p>
        </div>
      </section>
      <section class="largeColumn" id="donationInfo">
        <div class="information">
          MÅL<img src="image/icon_maal.svg" alt="" /> <p class="goal">100.000 DKK</p> 
        </div>

        <div class="information">
          INDSAMLET<img src="image/icon_penge.svg" alt="" /><p class="indsamlet"></p>
        </div>

        <div class="information">
          SENESTE DONATION<img src="image/icon_mand.svg" alt="" />Anonym 125 DKK
        </div>

        <div class="information">
          TID TILBAGE<img src="image/icon_dato.svg" alt="" /> <p id="demo">23.11.56.04</p> 
        </div>
      </section>

      <section class="largeColumn" id="gallery">
        <img class="imgIndex" src="image/img-04.jpg" alt="" />
        <img class="imgIndex" src="image/img-01.jpg" alt="" />
        <img class="imgIndex" src="image/img-02.jpg" alt="" />
        <img class="imgIndex" src="image/img-03.jpg" alt="" />
      </section>
      <footer class="largeColumn">
        <h2>GET IN TOUCH</h2>
        <p class="mail">STØT@HUNDOGHJEMLØS.DK</p>
        <h2>Phone <br>
            +45 41441015</h2>
        <div class="some">
            <a href="#"></a><img src="image/some-01.svg"></a>
            <a href="#"><img src="image/some-02.svg"></a>
            <a href="#"><img src="image/some-03.svg"></a>
        </div>
    </div>
      </footer>
    </article>
  </body>

  <script src="app.js"></script>

  <script>
    let fundraisertest = [];
    let fundraiser = [];
     let fyn = [];
      let jylland = [];
      let sjaelland = [];
      let sum;
      let fullAmount = [];
      let moneyAmount = 0;
      let donations = [];
    const form = document.querySelector("#add-cafe-form");
    document.querySelector(".donation").addEventListener("click", () => {
      document.querySelector(".popUp").style.display = "block";
    });
    db.collection("donations")
          .get()
          .then(snapshot => {
            snapshot.docs.forEach(doc => {
              donations.push(doc.data());
            });
            count();
            test();
           
          });


// med limits (kun 1 visning den nyeste )
 db.collection("donations").limit(1)
          .get()
          .then(snapshot => {
            snapshot.docs.forEach(doc => {
              fundraisertest.push(doc.data());
            });
 
          });





db.collection("fundraise")
          .get()
          .then(snapshot => {
            snapshot.docs.forEach(doc => {
              fundraiser.push(doc.data());
            });
          document.querySelector(".goal").textContent = fundraiser[0].goal + " DKK";
          });


          function count() {
        donations.forEach(amount => {
         if(amount.amount > 0) {
          fullAmount.push(amount.amount);
         }    
        }); 
      }

      function test() {
       fullAmount.forEach(sum => {
         moneyAmount = moneyAmount + parseInt(fullAmount);
       })
       document.querySelector(".indsamlet").textContent = moneyAmount + " DKK";
      }
    // saving data
    form.addEventListener("submit", e => {  e.preventDefault();

      document.querySelector("#giveDonation").addEventListener("click", () => {
        db.collection("donations").add({
          firstname: form.name.value,
          lastname: form.lastname.value,
          email: form.email.value,
          country: form.country.value,
          amount: form.amount.value,
          attend: form.attend.value,
          textil: form.textil.value
        });

        form.name.value = "";
        form.lastname.value = "";
        form.email.value = "";
        form.country.value = "";
        form.amount.value = "";
      });
    });




    var countDownDate = new Date("Jan 5, 2019 15:37:25").getTime();

// Update the count down every 1 second
var x = setInterval(function() {

  // Get todays date and time
  var now = new Date().getTime();

  // Find the distance between now and the count down date
  var distance = countDownDate - now;

  // Time calculations for days, hours, minutes and seconds
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);

  // Display the result in the element with id="demo"
  document.getElementById("demo").innerHTML = days + "d " + hours + "h "
  + minutes + "m " + seconds + "s ";

  // If the count down is finished, write some text 
  if (distance < 0) {
    clearInterval(x);
    document.getElementById("demo").innerHTML = "EXPIRED";
  }
}, 1000);
  </script>
</html>
